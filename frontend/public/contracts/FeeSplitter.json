{
  "contractName": "FeeSplitter",
  "constructorInputs": [
    {
      "name": "owner",
      "type": "pubkey"
    },
    {
      "name": "recipient0",
      "type": "pubkey"
    },
    {
      "name": "recipient1",
      "type": "pubkey"
    },
    {
      "name": "recipient2",
      "type": "pubkey"
    },
    {
      "name": "recipient3",
      "type": "pubkey"
    },
    {
      "name": "bp0",
      "type": "int"
    },
    {
      "name": "bp1",
      "type": "int"
    },
    {
      "name": "bp2",
      "type": "int"
    },
    {
      "name": "bp3",
      "type": "int"
    },
    {
      "name": "recipientsCount",
      "type": "int"
    },
    {
      "name": "minerFeeSats",
      "type": "int"
    },
    {
      "name": "treasury",
      "type": "pubkey"
    }
  ],
  "abi": [
    {
      "name": "split",
      "inputs": [
        {
          "name": "ownerSig",
          "type": "sig"
        }
      ]
    },
    {
      "name": "receiveFunds",
      "inputs": []
    }
  ],
  "bytecode": "OP_12 OP_PICK OP_0 OP_NUMEQUAL OP_IF OP_13 OP_ROLL OP_SWAP OP_CHECKSIGVERIFY OP_INPUTINDEX OP_UTXOVALUE OP_DUP OP_11 OP_PICK OP_GREATERTHAN OP_VERIFY OP_10 OP_ROLL OP_SUB OP_9 OP_PICK OP_1 OP_GREATERTHANOREQUAL OP_10 OP_PICK OP_4 OP_LESSTHANOREQUAL OP_BOOLAND OP_VERIFY OP_TXOUTPUTCOUNT OP_10 OP_PICK OP_GREATERTHANOREQUAL OP_VERIFY OP_9 OP_PICK OP_1 OP_NUMEQUAL OP_IF OP_0 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_ELSE OP_9 OP_PICK OP_2 OP_NUMEQUAL OP_IF OP_DUP OP_6 OP_PICK OP_MUL 1027 OP_DIV OP_0 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2DUP OP_SUB OP_1 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2DROP OP_ELSE OP_9 OP_PICK OP_3 OP_NUMEQUAL OP_IF OP_DUP OP_6 OP_PICK OP_MUL 1027 OP_DIV OP_OVER OP_8 OP_PICK OP_MUL 1027 OP_DIV OP_0 OP_OUTPUTVALUE OP_2 OP_PICK OP_NUMEQUALVERIFY OP_1 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2 OP_PICK OP_2 OP_PICK OP_SUB OP_OVER OP_SUB OP_2 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2DROP OP_DROP OP_ELSE OP_DUP OP_6 OP_PICK OP_MUL 1027 OP_DIV OP_OVER OP_8 OP_PICK OP_MUL 1027 OP_DIV OP_2 OP_PICK OP_10 OP_PICK OP_MUL 1027 OP_DIV OP_0 OP_OUTPUTVALUE OP_3 OP_PICK OP_NUMEQUALVERIFY OP_1 OP_OUTPUTVALUE OP_2 OP_PICK OP_NUMEQUALVERIFY OP_2 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2OVER OP_SUB OP_2 OP_PICK OP_SUB OP_OVER OP_SUB OP_3 OP_OUTPUTVALUE OP_OVER OP_NUMEQUALVERIFY OP_2DROP OP_2DROP OP_ENDIF OP_ENDIF OP_ENDIF OP_9 OP_PICK OP_1 OP_GREATERTHANOREQUAL OP_IF OP_OVER OP_2 OP_PICK OP_EQUALVERIFY OP_ENDIF OP_9 OP_PICK OP_2 OP_GREATERTHANOREQUAL OP_IF OP_2 OP_PICK OP_3 OP_PICK OP_EQUALVERIFY OP_ENDIF OP_9 OP_PICK OP_3 OP_GREATERTHANOREQUAL OP_IF OP_3 OP_PICK OP_4 OP_PICK OP_EQUALVERIFY OP_ENDIF OP_9 OP_ROLL OP_4 OP_GREATERTHANOREQUAL OP_IF OP_4 OP_PICK OP_5 OP_PICK OP_EQUALVERIFY OP_ENDIF OP_5 OP_PICK OP_6 OP_ROLL OP_NUMEQUALVERIFY OP_5 OP_PICK OP_6 OP_ROLL OP_NUMEQUALVERIFY OP_5 OP_PICK OP_6 OP_ROLL OP_NUMEQUALVERIFY OP_5 OP_PICK OP_6 OP_ROLL OP_NUMEQUALVERIFY OP_5 OP_PICK OP_6 OP_ROLL OP_EQUALVERIFY OP_2DROP OP_2DROP OP_2DROP OP_1 OP_ELSE OP_12 OP_ROLL OP_1 OP_NUMEQUALVERIFY OP_1 OP_VERIFY OP_2DROP OP_2DROP OP_2DROP OP_2DROP OP_2DROP OP_2DROP OP_1 OP_ENDIF",
  "source": "pragma cashscript ^0.12.0;\n\n/*\n  FeeSplitter.cash\n  - Purpose: Split an incoming amount according to basis points among recipients, with miner fee handling.\n  - Constructor:\n      pubkey owner,\n      pubkey[] recipients,\n      int[] basisPoints,    // parts per 10,000 (sum <= 10000 permitted)\n      int minerFeeSats,\n      pubkey treasury       // optional treasury to receive protocol remainder if sum of bp < 10000\n  - Function:\n      split(sig ownerSig)\n  - Behavior:\n      - total = tx.inputs[this.activeInputIndex].value\n      - distributable = total - minerFeeSats\n      - compute amounts for recipients[0..n-2] as floor(distributable * bp / 10000)\n      - last recipient gets remainder OR if sum(bp) < 10000 the remaining fraction is sent to treasury\n      - outputs must be in the same order as recipients[]\n*/\n\ncontract FeeSplitter(pubkey owner,\n                     pubkey recipient0, pubkey recipient1, pubkey recipient2, pubkey recipient3,\n                     int bp0, int bp1, int bp2, int bp3,\n                     int recipientsCount,\n                     int minerFeeSats,\n                     pubkey treasury) {\n\n  function split(sig ownerSig) {\n    require(checkSig(ownerSig, owner));\n\n    int total = tx.inputs[this.activeInputIndex].value;\n    require(total > minerFeeSats);\n    int distributable = total - minerFeeSats;\n\n    require(recipientsCount >= 1 && recipientsCount <= 4);\n    require(tx.outputs.length >= recipientsCount);\n\n    if (recipientsCount == 1) {\n      require(tx.outputs[0].value == distributable);\n    } else if (recipientsCount == 2) {\n      int amt0 = (distributable * bp0) / 10000;\n      require(tx.outputs[0].value == amt0);\n      int amt1 = distributable - amt0;\n      require(tx.outputs[1].value == amt1);\n    } else if (recipientsCount == 3) {\n      int amt0 = (distributable * bp0) / 10000;\n      int amt1 = (distributable * bp1) / 10000;\n      require(tx.outputs[0].value == amt0);\n      require(tx.outputs[1].value == amt1);\n      int amt2 = distributable - amt0 - amt1;\n      require(tx.outputs[2].value == amt2);\n    } else {\n      int amt0 = (distributable * bp0) / 10000;\n      int amt1 = (distributable * bp1) / 10000;\n      int amt2 = (distributable * bp2) / 10000;\n      require(tx.outputs[0].value == amt0);\n      require(tx.outputs[1].value == amt1);\n      require(tx.outputs[2].value == amt2);\n      int amt3 = distributable - amt0 - amt1 - amt2;\n      require(tx.outputs[3].value == amt3);\n    }\n    // Reference recipient and bp variables to avoid unused variable warnings\n    if (recipientsCount >= 1) { require(recipient0 == recipient0); }\n    if (recipientsCount >= 2) { require(recipient1 == recipient1); }\n    if (recipientsCount >= 3) { require(recipient2 == recipient2); }\n    if (recipientsCount >= 4) { require(recipient3 == recipient3); }\n    require(bp0 == bp0);\n    require(bp1 == bp1);\n    require(bp2 == bp2);\n    require(bp3 == bp3);\n    require(treasury == treasury);\n  }\n\n  function receiveFunds() {\n    require(true);\n  }\n}\n",
  "debug": {
    "bytecode": "5c79009c635d7a7cadc0c6765b79a0695a7a94597951a25a7954a19a69c45a79a2695979519c6300cc789d675979529c63765679950210279600cc789d6e9451cc789d6d675979539c637656799502102796785879950210279600cc52799d51cc789d5279527994789452cc789d6d75677656799502102796785879950210279652795a79950210279600cc53799d51cc52799d52cc789d7094527994789453cc789d6d6d686868597951a2637852798868597952a263527953798868597953a263537954798868597a54a2635479557988685579567a9d5579567a9d5579567a9d5579567a9d5579567a886d6d6d51675c7a519d51696d6d6d6d6d6d5168",
    "sourceMap": "29:2:73:3;;;;;30:21:30:29;;:31::36;:4::39:1;32:26:32:47:0;:16::54:1;33:12:33:17:0;:20::32;;:12:::1;:4::34;34:32:34:44:0;;:24:::1;36:12:36:27:0;;:31::32;:12:::1;:36::51:0;;:55::56;:36:::1;:12;:4::58;37:12:37:29:0;:33::48;;:12:::1;:4::50;39:8:39:23:0;;:27::28;:8:::1;:30:41:5:0;40:25:40:26;:14::33:1;:37::50:0;:6::52:1;41:11:62:5:0;:15:41:30;;:34::35;:15:::1;:37:46:5:0;42:18:42:31;:34::37;;:18:::1;:41::46:0;:17:::1;43:25:43:26:0;:14::33:1;:37::41:0;:6::43:1;44:17:44:37:0;::::1;45:25:45:26:0;:14::33:1;:37::41:0;:6::43:1;41:37:46:5;46:11:62::0;:15:46:30;;:34::35;:15:::1;:37:53:5:0;47:18:47:31;:34::37;;:18:::1;:41::46:0;:17:::1;48:18:48:31:0;:34::37;;:18:::1;:41::46:0;:17:::1;49:25:49:26:0;:14::33:1;:37::41:0;;:6::43:1;50:25:50:26:0;:14::33:1;:37::41:0;:6::43:1;51:17:51:30:0;;:33::37;;:17:::1;:40::44:0;:17:::1;52:25:52:26:0;:14::33:1;:37::41:0;:6::43:1;46:37:53:5;;53:11:62::0;54:18:54:31;:34::37;;:18:::1;:41::46:0;:17:::1;55:18:55:31:0;:34::37;;:18:::1;:41::46:0;:17:::1;56:18:56:31:0;;:34::37;;:18:::1;:41::46:0;:17:::1;57:25:57:26:0;:14::33:1;:37::41:0;;:6::43:1;58:25:58:26:0;:14::33:1;:37::41:0;;:6::43:1;59:25:59:26:0;:14::33:1;:37::41:0;:6::43:1;60:17:60:37:0;::::1;:40::44:0;;:17:::1;:47::51:0;:17:::1;61:25:61:26:0;:14::33:1;:37::41:0;:6::43:1;53:11:62:5;;;46;41;64:8:64:23:0;;:27::28;:8:::1;:30::68:0;:40::50;:54::64;;:32::66:1;:30::68;65:8:65:23:0;;:27::28;:8:::1;:30::68:0;:40::50;;:54::64;;:32::66:1;:30::68;66:8:66:23:0;;:27::28;:8:::1;:30::68:0;:40::50;;:54::64;;:32::66:1;:30::68;67:8:67:23:0;;:27::28;:8:::1;:30::68:0;:40::50;;:54::64;;:32::66:1;:30::68;68:12:68:15:0;;:19::22;;:4::24:1;69:12:69:15:0;;:19::22;;:4::24:1;70:12:70:15:0;;:19::22;;:4::24:1;71:12:71:15:0;;:19::22;;:4::24:1;72:12:72:20:0;;:24::32;;:4::34:1;29:2:73:3;;;;;75::77::0;;;;76:12:76:16;:4::18:1;75:2:77:3;;;;;;;22:0:78:1",
    "logs": [],
    "requires": [
      {
        "ip": 20,
        "line": 30
      },
      {
        "ip": 27,
        "line": 33
      },
      {
        "ip": 40,
        "line": 36
      },
      {
        "ip": 45,
        "line": 37
      },
      {
        "ip": 54,
        "line": 40
      },
      {
        "ip": 70,
        "line": 43
      },
      {
        "ip": 76,
        "line": 45
      },
      {
        "ip": 100,
        "line": 49
      },
      {
        "ip": 104,
        "line": 50
      },
      {
        "ip": 115,
        "line": 52
      },
      {
        "ip": 142,
        "line": 57
      },
      {
        "ip": 147,
        "line": 58
      },
      {
        "ip": 151,
        "line": 59
      },
      {
        "ip": 162,
        "line": 61
      },
      {
        "ip": 176,
        "line": 64
      },
      {
        "ip": 187,
        "line": 65
      },
      {
        "ip": 198,
        "line": 66
      },
      {
        "ip": 209,
        "line": 67
      },
      {
        "ip": 215,
        "line": 68
      },
      {
        "ip": 220,
        "line": 69
      },
      {
        "ip": 225,
        "line": 70
      },
      {
        "ip": 230,
        "line": 71
      },
      {
        "ip": 235,
        "line": 72
      },
      {
        "ip": 246,
        "line": 76
      }
    ]
  },
  "compiler": {
    "name": "cashc",
    "version": "0.12.0"
  },
  "updatedAt": "2025-11-22T11:03:29.040Z"
}